{
  "s3": {
    "bucket": "${S3_BUCKET_NAME}",
    "region": "${AWS_REGION}",
    "endpoint": "${AWS_S3_ENDPOINT}",
    "forcePathStyle": "${AWS_S3_FORCE_PATH_STYLE}",
    "accessKeyId": "${AWS_ACCESS_KEY_ID}",
    "secretAccessKey": "${AWS_SECRET_ACCESS_KEY}"
  },
  "nextjs": {
    "output": "standalone",
    "trailingSlash": false,
    "images": {
      "unoptimized": false,
      "domains": [],
      "remotePatterns": [
        {
          "protocol": "https",
          "hostname": "*.amazonaws.com",
          "port": "",
          "pathname": "/**"
        },
        {
          "protocol": "https",
          "hostname": "*.s3.amazonaws.com",
          "port": "",
          "pathname": "/**"
        },
        {
          "protocol": "https",
          "hostname": "*.s3.${AWS_REGION}.amazonaws.com",
          "port": "",
          "pathname": "/**"
        }
      ]
    },
    "assetPrefix": "https://${S3_BUCKET_NAME}.s3.${AWS_REGION}.amazonaws.com",
    "basePath": "",
    "env": {
      "NEXT_PUBLIC_S3_BUCKET": "${S3_BUCKET_NAME}",
      "NEXT_PUBLIC_S3_REGION": "${AWS_REGION}",
      "S3_BUCKET_NAME": "${S3_BUCKET_NAME}",
      "AWS_REGION": "${AWS_REGION}"
    }
  },
  "docker": {
    "buildArgs": [
      "AWS_S3_BUCKET",
      "AWS_S3_REGION",
      "AWS_ACCESS_KEY_ID",
      "AWS_SECRET_ACCESS_KEY",
      "NEXT_PUBLIC_APP_URL"
    ],
    "environment": [
      "NODE_ENV=production",
      "S3_BUCKET_NAME",
      "AWS_REGION",
      "AWS_ACCESS_KEY_ID",
      "AWS_SECRET_ACCESS_KEY",
      "AWS_S3_ENDPOINT",
      "AWS_S3_FORCE_PATH_STYLE",
      "NEXT_PUBLIC_S3_BUCKET",
      "NEXT_PUBLIC_S3_REGION"
    ]
  },
  "deployment": {
    "strategy": "s3-static-hosting",
    "staticAssets": {
      "source": "./apps/sim/.next/static",
      "destination": "s3://${S3_BUCKET_NAME}/_next/static",
      "cacheControl": "public, max-age=31536000, immutable"
    },
    "publicAssets": {
      "source": "./apps/sim/public",
      "destination": "s3://${S3_BUCKET_NAME}/",
      "cacheControl": "public, max-age=86400"
    }
  }
}
